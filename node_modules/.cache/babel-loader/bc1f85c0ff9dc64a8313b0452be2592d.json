{"ast":null,"code":"var _jsxFileName = \"/home/master/Science/Internship/test_task/src/Shipment/Shipment.js\";\nimport React, { Component } from \"react\";\nimport { IoIosAddCircleOutline } from \"react-icons/io\";\nimport { IoIosClose } from \"react-icons/io\";\nimport \"./Shipment.css\";\nimport Item from \"../Item/Item\";\nimport axios from \"axios\";\n\nclass Shipment extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      items: this.props.shipment.items,\n      newId: \"\",\n      newCode: \"\"\n    };\n\n    this.addItem = async event => {\n      this.addItemToState();\n      this.clearInputs();\n\n      try {\n        await axios.post(\"https://api.shipments.test-y-sbm.com/item\", {\n          id: this.state.newId,\n          code: this.state.newCode,\n          shipment_id: props.id,\n          name: props.name\n        }, {\n          headers: {\n            Authorization: \"bearer \".concat(localStorage.token)\n          }\n        });\n        this.clearItemInput();\n      } catch (e) {\n        console.log(e);\n      }\n    };\n\n    this.addItemToState = () => {\n      console.log(this.state);\n      const item = {\n        id: this.state.newId,\n        code: this.state.newCode\n      };\n      const currentArray = [...this.state.items];\n      const newArray = currentArray;\n      newArray.push(item);\n      this.setState({\n        items: newArray\n      });\n    };\n\n    this.removeItemFromState = id => {\n      const currentArray = [...this.state.items];\n      const newArray = currentArray.filter(item => item.id !== id);\n      this.setState({\n        items: newArray\n      });\n    };\n\n    this.newItemId = event => {\n      this.setState({\n        newId: event.target.value\n      });\n    };\n\n    this.newItemCode = event => {\n      this.setState({\n        newCode: event.target.value\n      });\n    };\n\n    this.clearInputs = () => {\n      this.setState({\n        newId: \"\",\n        newCode: \"\"\n      });\n    };\n  }\n\n  render() {\n    const props = this.props,\n          state = this.state;\n    const items = props.shipment;\n    console.log(items);\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"shipment\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, \"Shipment id: \", React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, props.id)), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, \"Shipment name: \", props.name), state.items.map(item => React.createElement(Item, {\n      id: item.id,\n      code: item.code,\n      removeItemFromState: this.removeItemFromState,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      className: \"delete-shipment\",\n      onClick: async event => {\n        props.removeShipmentFromState(props.id);\n        this.setState({\n          items: []\n        });\n\n        try {\n          await axios.delete(\"https://api.shipments.test-y-sbm.com/shipment/\".concat(props.id), {\n            headers: {\n              Authorization: \"bearer \".concat(localStorage.token)\n            }\n          });\n        } catch (e) {\n          console.log(e);\n        }\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, React.createElement(IoIosClose, {\n      className: \"delete-icon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, \"Delete shipment\")), React.createElement(\"div\", {\n      className: \"add-item-div\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"add-item\",\n      onClick: this.addItem,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, React.createElement(IoIosAddCircleOutline, {\n      className: \"add-icon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, \"Add item\")), React.createElement(\"div\", {\n      className: \"item-inputs\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      placeholder: \"id\",\n      onChange: this.newItemId,\n      value: this.state.newId,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      placeholder: \"name\",\n      onChange: this.newItemCode,\n      value: this.state.newCode,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    })))));\n  }\n\n}\n\nexport default Shipment;","map":{"version":3,"sources":["/home/master/Science/Internship/test_task/src/Shipment/Shipment.js"],"names":["React","Component","IoIosAddCircleOutline","IoIosClose","Item","axios","Shipment","state","items","props","shipment","newId","newCode","addItem","event","addItemToState","clearInputs","post","id","code","shipment_id","name","headers","Authorization","localStorage","token","clearItemInput","e","console","log","item","currentArray","newArray","push","setState","removeItemFromState","filter","newItemId","target","value","newItemCode","render","map","removeShipmentFromState","delete"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { IoIosAddCircleOutline } from \"react-icons/io\";\nimport { IoIosClose } from \"react-icons/io\";\nimport \"./Shipment.css\";\nimport Item from \"../Item/Item\";\nimport axios from \"axios\";\n\nclass Shipment extends Component {\n  state = {\n    items: this.props.shipment.items,\n    newId: \"\",\n    newCode: \"\"\n  };\n  addItem = async event => {\n    this.addItemToState();\n    this.clearInputs();\n    try {\n      await axios.post(\n        `https://api.shipments.test-y-sbm.com/item`,\n        {\n          id: this.state.newId,\n          code: this.state.newCode,\n          shipment_id: props.id,\n          name: props.name\n        },\n        {\n          headers: {\n            Authorization: `bearer ${localStorage.token}`\n          }\n        }\n      );\n      this.clearItemInput();\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  addItemToState = () => {\n    console.log(this.state);\n    const item = {\n      id: this.state.newId,\n      code: this.state.newCode\n    };\n    const currentArray = [...this.state.items];\n    const newArray = currentArray;\n    newArray.push(item);\n    this.setState({\n      items: newArray\n    });\n  };\n\n  removeItemFromState = id => {\n    const currentArray = [...this.state.items];\n    const newArray = currentArray.filter(item => item.id !== id);\n    this.setState({\n      items: newArray\n    });\n  };\n  newItemId = event => {\n    this.setState({\n      newId: event.target.value\n    });\n  };\n  newItemCode = event => {\n    this.setState({\n      newCode: event.target.value\n    });\n  };\n  clearInputs = () => {\n    this.setState({\n      newId: \"\",\n      newCode: \"\"\n    });\n  };\n\n  render() {\n    const { props, state } = this;\n\n    const items = props.shipment;\n    console.log(items);\n    return (\n      <div>\n        <div className=\"shipment\">\n          <p>\n            Shipment id: <b>{props.id}</b>\n          </p>\n          <p>Shipment name: {props.name}</p>\n          {state.items.map(item => (\n            <Item\n              id={item.id}\n              code={item.code}\n              removeItemFromState={this.removeItemFromState}\n            />\n          ))}\n          <button\n            className=\"delete-shipment\"\n            onClick={async event => {\n              props.removeShipmentFromState(props.id);\n              this.setState({\n                items: []\n              });\n              try {\n                await axios.delete(\n                  `https://api.shipments.test-y-sbm.com/shipment/${props.id}`,\n                  {\n                    headers: {\n                      Authorization: `bearer ${localStorage.token}`\n                    }\n                  }\n                );\n              } catch (e) {\n                console.log(e);\n              }\n            }}\n          >\n            <IoIosClose className=\"delete-icon\" />\n            <p>Delete shipment</p>\n          </button>\n          <div className=\"add-item-div\">\n            <button className=\"add-item\" onClick={this.addItem}>\n              <IoIosAddCircleOutline className=\"add-icon\" />\n              <p>Add item</p>\n            </button>\n            <div className=\"item-inputs\">\n              <input\n                placeholder=\"id\"\n                onChange={this.newItemId}\n                value={this.state.newId}\n              />\n              <input\n                placeholder=\"name\"\n                onChange={this.newItemCode}\n                value={this.state.newCode}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Shipment;\n"]},"metadata":{},"sourceType":"module"}